# 2026-01-05 連線版遊戲無法自動開始

## 問題描述
連線版貪食蛇遊戲在連接到 WebSocket 伺服器後，雖然伺服器端已建立玩家的蛇並開始遊戲循環，但客戶端畫面上看不到蛇，也無法操控。

## 原因分析
1. **缺少自動開始機制**：客戶端在收到 `init` 訊息後，只建立了 `mySnake` 物件和玩家資料，但沒有啟動遊戲循環
2. **繪製循環未啟動**：`draw()` 函數只在 `gameLoop` interval 中被呼叫，而 `gameLoop` 只在手動點擊「開始遊戲」按鈕時才會啟動
3. **使用者體驗不一致**：伺服器端已自動開始，但客戶端需要手動觸發，造成困惑

## 解決方案
1. **自動開始遊戲** (snake-game.html:330-332)
   - 在 `handleServerMessage` 處理 `init` 訊息時，增加 `updatePlayerList()` 和 `startGame()` 呼叫
   - 確保連線成功後立即啟動遊戲循環和繪製

2. **改善遊戲更新邏輯** (snake-game.html:479-489)
   - 修改 `updateGame` 函數的檢查條件
   - 移除對 `!mySnake` 的過度檢查
   - 確保多人模式也能正確繪製畫面

## 相關檔案
- `snake-game.html:318-333` - handleServerMessage 函數
- `snake-game.html:478-489` - updateGame 函數

## 學到的教訓
- WebSocket 遊戲需要確保客戶端和伺服器端的狀態同步
- 使用者體驗應該一致：如果伺服器自動開始，客戶端也應該自動開始
- 初始化流程應該完整：不只建立資料，也要啟動必要的循環和更新機制
